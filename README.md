# JPA 기본편

## 4. 연관관계 매핑 기초

### 4-1. 실전 예제 1 - 요구사항 분석과 기본 매핑

#### 요구사항 분석

* 회원은 상품을 주문할 수 있다.
* 주문 시 여러 종류의 상품을 선택할 수 있다.

##### 기능 목록

* 회원 기능
    * 회원 등록
    * 회원 조회
* 상품 기능
    * 상품 등록
    * 상품 수정
    * 상품 조회
* 주문 기능
    * 상품 주문
    * 주문 내역 조회
    * 주문 취소

##### 도메인 모델 분석

* **회원과 주문의 관계**: **회원**은 여러 번 **주문**할 수 있다.
* **주문과 상품의 관계**: **주문**할 때 여러 **상품**을 선택할 수 있다.
    * 반대로 같은 **상품**도 여러 번 **주문**될 수 있다.
    * **주문 상품**이라는 모델을 만들어서 다대다 관계를 일대다, 다대일 관계로 풀어냄

![](https://i.ibb.co/Qn9gdfj/bandicam-2021-07-14-19-50-40-610.jpg)

#### 테이블 설계

![](https://i.ibb.co/31sTmC0/bandicam-2021-07-14-19-51-38-796.jpg)

#### 엔티티 설계와 매핑

![](https://i.ibb.co/d6nV3V3/bandicam-2021-07-14-19-52-04-856.jpg)

#### 데이터 중심 설계의 문제점

* 현재 방식은 객체 설계를 테이블 설계에 맞춘 방식
* 테이블의 외래키를 객체에 그대로 가져옴
* 객체 그래프 탐색이 불가능
* 참조가 없으므로 UML도 잘못됨
